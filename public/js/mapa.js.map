{"version":3,"file":"mapa.js","mappings":";;UAAA;UACA;;;;;WCDA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,wBAAwB,EAAE,yBAAyB,EAAE,EAAE,EAAE,EAAE,EAAE;AAC7D;AACA,cAAc;AACd,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,CAAC","sources":["webpack://my-webpack-project/webpack/bootstrap","webpack://my-webpack-project/webpack/runtime/make namespace object","webpack://my-webpack-project/./src/js/mapa.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","(function () {\r\n  //lat - lng\r\n  let coord = {\r\n    lat: -31.745892337795638,\r\n    lng: -60.53923534164746,\r\n  };\r\n  const coordPrevias = document.querySelector(\"[name='coordenadas']\");\r\n  if (coordPrevias.value) {\r\n    const coordenadas = coordPrevias.value.split(\",\");\r\n    coord = { lat: coordenadas[0], lng: coordenadas[1] };\r\n    setTimeout(() => {\r\n      resetMarkerPosition();\r\n      mapa.setZoom(18);\r\n    }, 0);\r\n  }\r\n\r\n  const mapa = L.map(\"mapa\").setView(coord, 13);\r\n  let marker;\r\n\r\n  //utilizarr provider y geocoder\r\n  const geocodeService = L.esri.Geocoding;\r\n\r\n  resetInputBusqueda();\r\n  function resetInputBusqueda() {\r\n    setTimeout(() => {\r\n      const inputBusqueda = document.querySelector(\".geocoder-control-input\");\r\n      inputBusqueda.placeholder = \"Búsqueda\";\r\n    }, 0);\r\n  }\r\n\r\n  L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\r\n    attribution:\r\n      '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\r\n  }).addTo(mapa);\r\n\r\n  mapa.on(\"click\", tomarCoordenadas);\r\n\r\n  const searchControl = L.esri.Geocoding.geosearch({\r\n    position: \"bottomleft\",\r\n    useMapBounds: false,\r\n    title: \"Búsqueda\",\r\n  }).addTo(mapa);\r\n\r\n  searchControl.on(\"results\", (data) => {\r\n    coord = data.latlng;\r\n    resetMarkerPosition();\r\n  });\r\n\r\n  function tomarCoordenadas(e) {\r\n    coord = e.latlng;\r\n    resetMarkerPosition();\r\n  }\r\n\r\n  function centrarMapa() {\r\n    mapa.panTo(new L.LatLng(coord.lat, coord.lng));\r\n  }\r\n\r\n  function obtenerCalles() {\r\n    setTimeout(() => {\r\n      geocodeService\r\n        .reverseGeocode()\r\n        .latlng(coord)\r\n        .run(function (error, result) {\r\n          document.querySelector(\".calle\").textContent =\r\n            result?.address?.Address ?? \"\";\r\n          document.querySelector(\"[name='calle']\").value =\r\n            result?.address?.Address ?? \"\";\r\n          document.querySelector(\"[name='coordenadas']\").value =\r\n            result?.latlng.lat + \", \" + result?.latlng.lng;\r\n        });\r\n    }, 200);\r\n  }\r\n\r\n  function resetMarkerPosition() {\r\n    obtenerCalles();\r\n    centrarMapa();\r\n    resetInputBusqueda();\r\n    if (marker) mapa.removeLayer(marker);\r\n    marker = new L.marker(coord, {\r\n      draggable: true,\r\n      autoPan: true,\r\n    })\r\n      .addTo(mapa)\r\n      .on(\"dragend\", () => {\r\n        //guardamos las coords cuando suelta el marcador a la hora de arrastrarlo\r\n        coord = marker.getLatLng();\r\n        obtenerCalles();\r\n        centrarMapa();\r\n        resetInputBusqueda();\r\n      });\r\n  }\r\n})();\r\n"],"names":[],"sourceRoot":""}